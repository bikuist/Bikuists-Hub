<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bikuist's Hub</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: "Comic Sans MS", "Comic Sans", cursive;
    background-color: #1e1e1e;
    color: white;
    overflow: hidden;
    display: flex;
  }
  .sidebar {
    background-color: #2c2c2c;
    width: 200px;
    height: 100vh;
    padding-top: 30px;
    box-sizing: border-box;
    animation: slideInLeft 0.6s ease forwards;
  }
  .sidebar ul {
    list-style: none;
    padding-left: 0;
  }
  .sidebar ul li {
    margin: 20px 0;
  }
  .sidebar ul li a {
    color: white;
    text-decoration: none;
    font-size: 18px;
    display: block;
    padding: 10px 20px;
    cursor: pointer;
    transition: background 0.3s;
    user-select: none;
  }
  .sidebar ul li a:hover {
    background-color: #444;
  }
  .content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 40px;
    box-sizing: border-box;
  }
  #home {
    text-align: center;
    animation: fadeInScale 0.7s ease forwards;
  }
  #home h1 {
    font-size: 48px;
    margin-bottom: 20px;
  }
  #flavor-text {
    font-size: 20px;
    color: #ccc;
  }
  /* Make game list scrollable */
  #game-list {
    display: none;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-height: 80vh;
    overflow-y: auto;
    padding-right: 10px;
  }
  #game-list h2 {
    margin-bottom: 20px;
  }
  .game-button {
    background-color: #444;
    border: none;
    color: white;
    padding: 15px 25px;
    margin: 8px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 8px;
    transition: background-color 0.3s ease;
    user-select: none;
    width: 250px;
    text-align: center;
  }
  .game-button:hover {
    background-color: #666;
  }
  #game-display {
    display: none;
    flex-direction: column;
    align-items: center;
    width: 100%;
    height: 100%;
  }
  #back-button {
    background-color: #333;
    color: white;
    border: none;
    padding: 12px 24px;
    margin-bottom: 15px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 6px;
    user-select: none;
  }
  #back-button:hover {
    background-color: #555;
  }
  #game-container iframe {
    width: 90vw;
    max-width: 960px;
    height: 600px;
    border: none;
    border-radius: 8px;
    background: #000;
  }
  @keyframes slideInLeft {
    0% { transform: translateX(-120%); opacity: 0; }
    100% { transform: translateX(0); opacity: 1; }
  }
  @keyframes fadeInScale {
    0% { opacity: 0; transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
  }
</style>
</head>
<body>

<nav class="sidebar">
  <ul>
    <li><a id="home-tab" onclick="showHome()">Home</a></li>
    <li><a id="games-tab" onclick="showGameList()">G*mes</a></li>
    <li><a id="proxy-tab" onclick="alert('Proxy coming soon!')">Pr*xy</a></li>
  </ul>
</nav>

<main class="content">
  <section id="home">
    <h1>Bikuist's Hub</h1>
    <p id="flavor-text">Loading vibes...</p>
  </section>

  <section id="game-list" aria-label="Game selection list">
    <h2>Choose a Game</h2>
    <div id="games-container"></div>
  </section>

  <section id="game-display" aria-label="Game display">
    <button id="back-button" onclick="goBack()">← Back</button>
    <div id="game-container"></div>
  </section>
</main>

<script>
  const flavorTexts = [
    "Low-key your new favorite corner of the net.",
    "Touch grass later — there's games to run.",
    "Built diff. For gamers, by gamers.",
    "Just vibes, no paywalls.",
    "Boot up and zone out. You earned this.",
    "Skip the mid, we got peak content here.",
    "Your browser's about to get interesting.",
    "No cap, this place slaps.",
    "Lag-free zone. Real ones only.",
    "Scroll less, play more."
  ];

  function randomFlavorText() {
    const idx = Math.floor(Math.random() * flavorTexts.length);
    return flavorTexts[idx];
  }

  // Games list with canEmbed true if tested to embed normally.
  // canEmbed false means load URL through proxy.
  const games = [
    {
      name: "Brawlhalla",
      url: "https://play.brawlhalla.com/",
      canEmbed: true
    },
    {
      name: "Krunker.io",
      url: "https://krunker.io/",
      canEmbed: true
    },
    {
      name: "Minecraft Classic",
      url: "https://classic.minecraft.net/",
      canEmbed: true
    },
    {
      name: "Tetris",
      url: "https://tetris.com/play-tetris",
      canEmbed: true
    },
    {
      name: "Super Mario Bros (RetroGames.cc)",
      url: "https://www.retrogames.cc/embed/40809-super-mario-bros.html",
      canEmbed: true
    },
    {
      name: "Celeste (via Proxy)",
      url: "https://proxyhost.app/?url=https%3A%2F%2Fmattmakesgames.itch.io%2Fcelesteclassic",
      canEmbed: false
    }
  ];

  games.sort((a, b) => a.name.localeCompare(b.name));

  const homeSection = document.getElementById('home');
  const gameListSection = document.getElementById('game-list');
  const gameDisplaySection = document.getElementById('game-display');
  const flavorTextEl = document.getElementById('flavor-text');
  const gamesContainer = document.getElementById('games-container');
  const gameContainer = document.getElementById('game-container');

  function renderGameButtons() {
    gamesContainer.innerHTML = "";
    for (const game of games) {
      const btn = document.createElement('button');
      btn.textContent = game.name;
      btn.className = 'game-button';
      btn.onclick = () => loadGame(game);
      gamesContainer.appendChild(btn);
    }
  }

  function hideAll() {
    homeSection.style.display = 'none';
    gameListSection.style.display = 'none';
    gameDisplaySection.style.display = 'none';
  }

  function showHome() {
    hideAll();
    flavorTextEl.textContent = randomFlavorText();
    homeSection.style.display = 'block';
  }

  function showGameList() {
    hideAll();
    gameListSection.style.display = 'flex';
  }

  function loadGame(game) {
    hideAll();
    gameDisplaySection.style.display = 'flex';
    gameContainer.innerHTML = "";

    const iframe = document.createElement('iframe');
    iframe.allowFullscreen = true;
    iframe.sandbox = "allow-scripts allow-same-origin";
    iframe.loading = "lazy";
    iframe.style.backgroundColor = "#000";

    if (game.canEmbed) {
      iframe.src = game.url;
    } else {
      iframe.src = game.url; // Using the proxy service for Celeste
    }

    iframe.onload = () => console.log(`Game loaded: ${game.name}`);
    iframe.onerror = (err) => console.error(`Failed to load: ${game.name}`, err);

    gameContainer.appendChild(iframe);
  }

  function goBack() {
    gameContainer.innerHTML = "";
    showGameList();
  }

  renderGameButtons();
  showHome();
</script>

</body>
</html>
